{"code":"import { creepHelpers } from 'helpers.role';\r\nexport var roleNewbieCleaner = {\r\n    // a function to run the logic for this role\r\n    run: function (creep) {\r\n        creepHelpers.isWorking(creep);\r\n        creepHelpers.exitMove(creep);\r\n        if (creep.memory.working) {\r\n            if (creep.room.name == creep.memory.home) {\r\n                creepHelpers.transferToContainer(creep);\r\n            }\r\n            else {\r\n                var exit = creep.room.findExitTo(creep.memory.home);\r\n                creep.moveTo(creep.pos.findClosestByRange(exit), { visualizePathStyle: { stroke: '#ffaa00' } });\r\n            }\r\n        }\r\n        else {\r\n            if (creep.room.name == creep.memory.targetRoom) {\r\n                var hostiles = _.sortBy(creep.room.find(FIND_HOSTILE_CREEPS), function (c) { return creep.pos.getRangeTo(c); });\r\n                var hostileStructs = _.sortBy(creep.room.find(FIND_HOSTILE_STRUCTURES), function (c) { return creep.pos.getRangeTo(c); }).filter(function (s) { return s.structureType !== STRUCTURE_CONTROLLER; });\r\n                var controller = _.sortBy(creep.room.find(FIND_HOSTILE_STRUCTURES), function (c) { return creep.pos.getRangeTo(c); }).filter(function (s) { return s.structureType == STRUCTURE_CONTROLLER; })[0];\r\n                if (creep.room.find(FIND_TOMBSTONES).filter(function (t) { return _.sum(t.store) > 0; }).length > 0) {\r\n                    creepHelpers.pickupToumbstones(creep);\r\n                }\r\n                else if (creep.room.find(FIND_DROPPED_RESOURCES).length > 0) {\r\n                    creepHelpers.pickupResources(creep);\r\n                }\r\n                else if (hostiles.length > 0) {\r\n                    if (creep.attack(hostiles[0]) == ERR_NOT_IN_RANGE) {\r\n                        creep.moveTo(hostiles[0].pos);\r\n                    }\r\n                }\r\n                else if (hostileStructs.length > 0) {\r\n                    if (creep.attack(hostileStructs[0]) == ERR_NOT_IN_RANGE) {\r\n                        creep.moveTo(hostileStructs[0].pos);\r\n                    }\r\n                }\r\n                else if (controller) {\r\n                    if (creep.attackController(controller) == ERR_NOT_IN_RANGE) {\r\n                        creep.moveTo(controller.pos);\r\n                    }\r\n                }\r\n                else {\r\n                    creep.memory.working = true;\r\n                }\r\n            }\r\n            else {\r\n                var exit = creep.room.findExitTo(creep.memory.targetRoom);\r\n                creep.moveTo(creep.pos.findClosestByRange(exit));\r\n            }\r\n        }\r\n    }\r\n};\r\n//# sourceMappingURL=role.newbieCleaner.js.map","map":{"version":3,"file":"role.newbieCleaner.js","sourceRoot":"","sources":["src/role.newbieCleaner.ts"],"names":[],"mappings":"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"}}
